name: LCXX generate docs

on:
  push:
    branches: [ "develop" ]
    tags:
      - v**

jobs:

  build-linux:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: get doxygen
      run: sudo apt-get update && sudo apt-get install -y doxygen

    - name: build doxygen
      working-directory: docs/Doxygen
      run: doxygen Doxyfile-prj.cfg

    - name: get sphinx + deps
      run: pip install sphinx breathe exhale git+https://github.com/bashtage/sphinx-material.git

    - name: build sphinx docs
      working-directory: docs/Sphinx
      run: make html

    - name: Deploy ðŸš€
      uses: JamesIves/github-pages-deploy-action@v4
      with:
        folder: docs/Sphinx/build/html
        target-folder: .